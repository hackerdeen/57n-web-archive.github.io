<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 
<!-- Mirrored from lists.57north.co/pipermail/57north-discuss/2021-March/003707.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Nov 2021 10:44:33 GMT -->
<HEAD>
   <TITLE> [57north-discuss] Fwd: [bitfolk] Major maintenance scheduled for 2021-04-20 (1 server) and 2021-04-27 (another 6 servers)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:57north-discuss%40lists.57north.co?Subject=Re%3A%20%5B57north-discuss%5D%20%3D%3Futf-8%3Fq%3FFwd%3D3A_%3D5Bbitfolk%3D5D_Major_maintenanc%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fe_scheduled_for_2021-04-20_%3D281_server%3D29_and_2021-04-27_%3D28ano%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fther_6_servers%3D29%3F%3D&In-Reply-To=%3C27e6b1ea-3551-4842-9451-1595895a4046%40www.fastmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="https://lists.57north.co/pipermail/57north-discuss/2021-March/003706.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[57north-discuss] Fwd: [bitfolk] Major maintenance scheduled for 2021-04-20 (1 server) and 2021-04-27 (another 6 servers)</H1>
    <B>Robert McWilliam</B> 
    <A HREF="mailto:57north-discuss%40lists.57north.co?Subject=Re%3A%20%5B57north-discuss%5D%20%3D%3Futf-8%3Fq%3FFwd%3D3A_%3D5Bbitfolk%3D5D_Major_maintenanc%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fe_scheduled_for_2021-04-20_%3D281_server%3D29_and_2021-04-27_%3D28ano%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fther_6_servers%3D29%3F%3D&In-Reply-To=%3C27e6b1ea-3551-4842-9451-1595895a4046%40www.fastmail.com%3E"
       TITLE="[57north-discuss] Fwd: [bitfolk] Major maintenance scheduled for 2021-04-20 (1 server) and 2021-04-27 (another 6 servers)">rmcw at allmail.net
       </A><BR>
    <I>Mon Mar 22 15:53:58 GMT 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="https://lists.57north.co/pipermail/57north-discuss/2021-March/003706.html">[57north-discuss] [57north-announce] 57N Tuesday Hangout!
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/date.html#3707">[ date ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/thread.html#3707">[ thread ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/subject.html#3707">[ subject ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/author.html#3707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As below, bitfolk will be moving some servers. 

Garioch is on a host that isn't part of this move. Finzean is on paradox so should expect it to be down for ~30mins some time between 22:00 on 27th April and 02:00 on 28th (UTC). 

Robert
________________________________________________________
Robert McWilliam     <A HREF="http://lists.57north.co/listinfo/57north-discuss">rmcw at allmail.net</A>    argh.technology

What do you consider to be your median achievement?


----- Original message -----
From: Andy Smith &lt;<A HREF="http://lists.57north.co/listinfo/57north-discuss">andy at bitfolk.com</A> &lt;mailto:andy%40bitfolk.com&gt;&gt;
To: <A HREF="http://lists.57north.co/listinfo/57north-discuss">announce at lists.bitfolk.com</A> &lt;mailto:announce%40lists.bitfolk.com&gt;
Subject: [bitfolk] Major maintenance scheduled for 2021-04-20 (1 server) and 2021-04-27 (another 6 servers)
Date: Saturday, 20 March 2021 12:34

Hello all,

A web version of this email with any updates that have come to light
since posting is available here:

    <A HREF="https://tools.bitfolk.com/wiki/Maintenance/2021-04-Re-racking">https://tools.bitfolk.com/wiki/Maintenance/2021-04-Re-racking</A>

== TL;DR:

We need to relocate some servers to a different rack within
Telehouse.

On Tuesday 20 April 2021 at some point in the 2 hour window starting
at 20:00Z (21:00 BST) all customers on the following server will
have their VMs either powered off or suspended to storage:

* hen.bitfolk.com

We expect to have it powered back on within 30 minutes.

On Tuesday 27 April 2021 at some point in the 4 hour window starting
at 22:00Z (23:00 BST) all customers on the following servers will
have their VMs either powered off or suspended to storage:

* clockwork.bitfolk.com
* hobgoblin.bitfolk.com
* jack.bitfolk.com
* leffe.bitfolk.com
* macallan.bitfolk.com
* paradox.bitfolk.com

We expect the work on each server to take less than 30 minutes.

See &quot;Frequently Asked Questions&quot; at the bottom of this email for how
to determine which server your VM is on.

If you can't tolerate a ~30 minute outage at these times then please
contact support as soon as possible to ask for your VM to be moved
to a server that won't be part of this maintenance.

== Maintenance Background

Our colo provider needs to rebuild one of their racks that houses 7
of our servers. This is required because the infrastructure in the
rack (PDUs, switches etc) is of a ten year old vintage and all needs
replacing. To facilitate this, all customer hardware in that rack
will need to be moved to a different rack or sit outside of the rack
while it is rebuilt. We are going to have to move our 7 servers to a
different rack.

This is a significant piece of work which is going to affect several
hundred of our customers, more than 70% of the customer base.
Unfortunately it is unavoidable.

== Networking upgrade

We will also take the opportunity to install 10 gigabit NICs in the
servers which are moved. The main benefit of this will be faster
inter-server data transfer for when we want to move customer
services about. The current 1GE NICs limit this to about 90MiB/sec.

== Suspend &amp; Restore

If you opt in to suspend &amp; restore then instead of shutting your VM
down we will suspend it to storage and then when the server boots
again it will be restored. That means that you should not experience
a reboot, just a period of paused execution. You may find this less
disruptive than a reboot, but it is not without risk. Read more
here:

    <A HREF="https://tools.bitfolk.com/wiki/Suspend_and_restore">https://tools.bitfolk.com/wiki/Suspend_and_restore</A>

== Avoiding the Maintenance

If you cannot tolerate a ~30 minute outage during the maintenance
windows listed above then please contact support to agree a time
when we can move your VM to a server that won't be part of the
maintenance.

Doing so will typically take just a few seconds plus the time it
takes your VM to shut down and boot again and nothing will change
about your VM.

If you have opted in to suspend &amp; restore then we'll use this to do
a &quot;semi-live&quot; migration. This will appear to be a minute or two of
paused execution.

Moving your VM is extra work for us which is why we're not doing it
by default for all customers, but if you prefer that to experiencing
the outage then we're happy to do it at a time convenient to you, as
long as we have time to do it and available spare capacity to move
you to. If you need this then please ask as soon as possible to
avoid disappointment.

It won't be possible to change the date/time of the planned work on
an individual customer basis. This work involves 7 of our servers,
will affect several hundred of our customers, and also has needed to
be scheduled with our colo provider and some of their other
customers. The only per-customer thing we may be able to do is move
your service ahead of time at a time convenient to you.

== Rolling Upgrades Confusion

We're currently in a cycle of rolling software upgrades to our
servers. Many of you have already received individual support
tickets to schedule that. It involves us moving your VM from one of
our servers to another and full details are given in the support
ticket.

This has nothing to do with the maintenance that's under discussion
here and we realise that it's unfortunately very confusing to have
both things happening at the same time. We did not know that moving
our servers would be necessary when we started the rolling upgrades.

We believe we can avoid moving any customer from a server that is
not part of this maintenance onto one that will be part of this
maintenance. We cannot avoid moving customers between servers that
are both going to be affected by this maintenance. For example, at
the time of writing, customer services are being moved off of
jack.bitfolk.com and most of them will end up on
hobgoblin.bitfolk.com.

== Further Notifications

Every customer is supposed to be subscribed to this announcement
mailing list, but no doubt some aren't. The movement of customer
services between our servers may also be confusing for people, so we
will send a direct email notification to the main contact of
affected customers a week before the work is due to take place.

So, on Tuesday 13 April we'll send a direct email about this to
customers that are hosted on hen.bitfolk.com, and then on Tuesday 20
April we'll send a similar email to customers on all the rest of the
affected servers.

== 20 April Will Be a Test Run

We are only planning to move one server on 20 April. The reasons for this are:

* We want to check our assumptions about how long this work will
  take, per server.
* We're changing the hardware configuration of the server by adding
  10GE NICs, and we want to make sure that configuration is stable.

The timings for the maintenance on 27 April may need to be altered
if the work on 20 April shows our guesses to be wildly wrong.

== Frequently Asked Questions

=== How do I know if I will be affected?

If your VM is hosted on one of the servers that will be moved then
you are going to be affected. There's a few different ways that you
can tell which server you are on:

1. It's listed on <A HREF="https://panel.bitfolk.com/">https://panel.bitfolk.com/</A>
2. It's in DNS when you resolve &lt;youraccountname&gt;.console.bitfolk.com
3. It's on your data transfer email summaries
4. You can see it on a `traceroute` or `mtr` to or from your VPS.

=== If you can &quot;semi-live&quot; migrate VMs, why don't you just do that?

* This maintenance will involve some 70% of our customer base, so we
  don't actually have enough spare hardware to move customers to.
* Moving the data takes significant time at 1GE network speeds.

For these reasons we think that it will be easier for most customers
to just accept a ~30 minute outage. Those who can't tolerate such a
disruption will be able to have their VMs moved to servers that
aren't going to be part of the maintenance.

=== Why are you needing to test out adding 10GE NICs to a live server? Isn't it already tested?

The main reason for running through this process first on one server
only (hen) is to check timings and procedure before doing it on
another six servers all at once. The issue of installing 10GE NICs
is a secondary concern and considered low risk.

The hardware for all 7 of the servers that are going to be moved is
obsolete now, so it's not possible to obtain identical spares now.
The 10GE NICs have been tested in general, but not with this
specific hardware, so it's just an extra cautionary measure.

The 10GE NICs will not be in use immediately in order to avoid too
much change at once, but this still does involve plugging in a PCIe
card which on boot will load a kernel module so while the risk is
considered low, it's not zero.

=== Further questions?

If there's anything we haven't covered or you need clarified please
do ask here or privately to support.

-- 
<A HREF="https://bitfolk.com/">https://bitfolk.com/</A> -- No-nonsense VPS hosting

_______________________________________________
announce mailing list
<A HREF="http://lists.57north.co/listinfo/57north-discuss">announce at lists.bitfolk.com</A> &lt;mailto:announce%40lists.bitfolk.com&gt;
<A HREF="https://lists.bitfolk.com/mailman/listinfo/announce">https://lists.bitfolk.com/mailman/listinfo/announce</A>

_______________________________________________
users mailing list
<A HREF="http://lists.57north.co/listinfo/57north-discuss">users at lists.bitfolk.com</A> &lt;mailto:users%40lists.bitfolk.com&gt;
<A HREF="https://lists.bitfolk.com/mailman/listinfo/users">https://lists.bitfolk.com/mailman/listinfo/users</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.57north.co/pipermail/57north-discuss/attachments/20210322/d2a38f42/attachment.html">http://lists.57north.co/pipermail/57north-discuss/attachments/20210322/d2a38f42/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.57north.co/pipermail/57north-discuss/attachments/20210322/d2a38f42/attachment.sig">http://lists.57north.co/pipermail/57north-discuss/attachments/20210322/d2a38f42/attachment.sig</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="https://lists.57north.co/pipermail/57north-discuss/2021-March/003706.html">[57north-discuss] [57north-announce] 57N Tuesday Hangout!
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/date.html#3707">[ date ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/thread.html#3707">[ thread ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/subject.html#3707">[ subject ]</a>
              <a href="https://lists.57north.co/pipermail/57north-discuss/2021-March/author.html#3707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.57north.co/listinfo/57north-discuss">More information about the 57north-discuss
mailing list</a><br>
</body>
<!-- Mirrored from lists.57north.co/pipermail/57north-discuss/2021-March/003707.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 16 Nov 2021 10:44:33 GMT -->
</html>
